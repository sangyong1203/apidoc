var Ze=Object.defineProperty;var We=(s,o,t)=>o in s?Ze(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t;var ee=(s,o,t)=>We(s,typeof o!="symbol"?o+"":o,t);import{N as et,r as M,O as oe,D as tt,P as lt,Q as ot,S as at,d as ce,p as ue,H as z,a as P,f as a,T as C,b as e,U as A,V as Ve,W as Ee,c as te,X as Q,Y as he,Z as nt,$ as Ae,a0 as be,a1 as qe,e as ve,a2 as Te,a3 as st,a4 as me,a5 as H,a6 as X,a7 as pe,a8 as ke,a9 as Ce,aa as rt,g as Pe,ab as Le,ac as Me,ad as He,o as it,G as de,ae as Ye,af as Ue,ag as dt,ah as ut,ai as ct,aj as le,ak as ie,al as pt,am as ft,an as Ie,ao as $e,ap as yt,aq as gt,ar as vt,as as mt,at as ht,au as bt,av as xt,aw as _t,ax as St,ay as qt}from"./components-DVDLpBNt.js";const De=et("EnvironmentStore",()=>{const s=M({name:"",host:"",authToken:"",isSelected:!1});return{environmentSetting:s,setEnvironmentSetting:t=>{s.value=t}}},{persist:!0}),G={async sendApi(s){const o=De();let t=null;const d=o.environmentSetting.host,r=tt();if(r.loggedInUser.accessToken=o.environmentSetting.authToken??"",s.httpMethod==="GET"){const n={query:s.requestParams};t=await oe().get(d+s.requestURL,{payload:n})}if(s.httpMethod==="POST")if(s.headersContentType==="form-data"){const n=s.requestParams,f=new FormData;for(const b in n)Array.isArray(n[b])&&n[b].length>0&&n[b][0]instanceof File?(console.log("file",n[b]),n[b].forEach(q=>{f.append(b,q)})):(console.log(b,n[b]),f.append(b,n[b]));const l={body:f};t=await oe().post(d+s.requestURL,{payload:l,headers:{Authorization:r.loggedInUser.accessToken}})}else{const n={body:s.requestParams};t=await oe().post(d+s.requestURL,{payload:n,headers:{Authorization:r.loggedInUser.accessToken}})}if(s.httpMethod==="PUT"){const n={body:s.requestParams};t=await oe().put(d+s.requestURL,{payload:n,headers:{Authorization:r.loggedInUser.accessToken}})}if(s.httpMethod==="DELETE"){const n={body:s.requestParams};t=await oe().delete(d+s.requestURL,{payload:n,headers:{Authorization:r.loggedInUser.accessToken}})}if(s.httpMethod==="GETFILE"){const n={query:s.requestParams};t=await oe().getFile(d+s.requestURL,{payload:n,headers:{Authorization:r.loggedInUser.accessToken}}),lt(t.data,s.donwloadFileName??"fileDownLoad")}return console.log("res",t),t},async getApiList(s){return new Promise((o,t)=>{J().then(d=>{const n=d.transaction("apiTable","readonly").objectStore("apiTable");if(s.requestURL||s.httpMethod||s.interfaceName||s.clientType){const f=[],b=n.index("requestURL").openCursor();b.onsuccess=q=>{const p=q==null?void 0:q.target.result;if(console.log("request.onsuccess----",p,s),p){const v=p.value;let x=!0;for(const[h,g]of Object.entries(s))console.log("const [key, value]---------",h,g),console.log("record[key]",v[h]),v[h]&&g&&!v[h].includes(g)&&(x=!1);x&&f.push(v),p.continue()}else console.log("matchesAllConditions",f),o(f)},b.onerror=q=>t(q.target.error)}else{const f=n.getAll();f.onsuccess=()=>o(f.result),f.onerror=l=>t(l.target.error)}}).catch(d=>{t(d)})})},async getApiInfo(s){return new Promise((o,t)=>{J().then(d=>{const f=d.transaction("apiTable","readonly").objectStore("apiTable").get(s);f.onsuccess=()=>{const l=f.result,b={...l,request:l.request.map(q=>({...q})),response:l.response.map(q=>({...q})),requestExample:JSON.parse(l.requestExample),responseExample:JSON.parse(l.responseExample)};o(b)},f.onerror=l=>t(l.target.error)}).catch(d=>{t(d)})})},async createApi(s){return new Promise((o,t)=>{J().then(d=>{try{const n=d.transaction("apiTable","readwrite").objectStore("apiTable"),f={...s,request:s.request.map(b=>({...b,files:[]})),response:s.response.map(b=>({...b})),requestExample:JSON.stringify(s.requestExample),responseExample:JSON.stringify(s.responseExample)};console.log("processedRequestInfo",f);const l=n.add(f);l.onsuccess=b=>{console.log("create api sucess"),o(l.result)},l.onerror=b=>{console.log("create api faild"),t(b.target.error)}}catch(r){console.log("create api error",r),t(r)}}).catch(d=>{t(d)})})},async updateApi(s){return new Promise((o,t)=>{J().then(d=>{try{const n=d.transaction("apiTable","readwrite").objectStore("apiTable"),f={...s,request:s.request.map(b=>({...b,files:[]})),response:s.response.map(b=>({...b})),requestExample:JSON.stringify(s.requestExample),responseExample:JSON.stringify(s.responseExample)};console.log("processedRequestInfo",f);const l=n.put(f);l.onsuccess=b=>{console.log("update api sucess"),o(l.result)},l.onerror=b=>{console.log("update api faild"),t(b.target.error)}}catch(r){console.log("create api error",r),t(r)}}).catch(d=>{t(d)})})},async deleteApi(s){const r=(await J()).transaction("apiTable","readwrite").objectStore("apiTable").delete(s);r.onsuccess=n=>{console.log("create api sucess")},r.onerror=n=>{console.log("create api fald",n.target.error)}},async checkDuplicateApi(s){(await J()).transaction("apiTable","readonly").objectStore("apiTable")},async getMenuList(){return await oe().get("/api/setting/menu")},async createMenu(s){const o={body:s};return await oe().post("/api/setting/menu",{payload:o})},async updateMenu(s){const o={body:s};return await oe().put("/api/setting/menu",{payload:o})},async deleteMenu(s){const o={query:s};return await oe().delete("/api/setting/menu",{payload:o})},async getHistoryList(){return new Promise((s,o)=>{J().then(t=>{const n=t.transaction("revisionHistory","readonly").objectStore("revisionHistory").getAll();n.onsuccess=()=>s(n.result),n.onerror=f=>o(f.target.error)}).catch(t=>{o(t)})})},async createHistory(s){const d=(await J()).transaction("revisionHistory","readwrite").objectStore("revisionHistory"),r={...s},n=d.add(r);n.onsuccess=f=>{console.log("createHistory sucess")},n.onerror=f=>{console.log("createHistory faild")}},async updateHistory(s){const d=(await J()).transaction("revisionHistory","readwrite").objectStore("revisionHistory"),r={...s},n=d.put(r);n.onsuccess=f=>{console.log("updateHistory sucess")},n.onerror=f=>{console.log("updateHistory faild")}},async deleteHistory(s){const r=(await J()).transaction("revisionHistory","readwrite").objectStore("revisionHistory").delete(s);r.onsuccess=n=>{console.log("delete histroy sucess")},r.onerror=n=>{console.log("delete histroy faild",n.target.error)}},async getCoverPage(){return new Promise((s,o)=>{J().then(t=>{const n=t.transaction("coverPage","readonly").objectStore("coverPage").getAll();n.onsuccess=()=>s(n.result[0]),n.onerror=f=>o(f.target.error)}).catch(t=>{o(t)})})},async createCoverPage(s){const d=(await J()).transaction("coverPage","readwrite").objectStore("coverPage"),r={...s},n=d.add(r);n.onsuccess=f=>{console.log("createCoverPage sucess")},n.onerror=f=>{console.log("createCoverPage faild")}},async updateCoverPage(s){const d=(await J()).transaction("coverPage","readwrite").objectStore("coverPage"),r={...s},n=d.put(r);n.onsuccess=f=>{console.log("updateCoverPage sucess")},n.onerror=f=>{console.log("updateCoverPage faild")}},async getEnvironmentSettingList(){return new Promise((s,o)=>{J().then(t=>{const n=t.transaction("environmentSetting","readonly").objectStore("environmentSetting").getAll();n.onsuccess=()=>s(n.result),n.onerror=f=>o(f.target.error)}).catch(t=>{o(t)})})},async getEnvironmentSetting(s){return new Promise((o,t)=>{J().then(d=>{const f=d.transaction("environmentSetting","readonly").objectStore("environmentSetting").get(s);f.onsuccess=()=>o(f.result),f.onerror=l=>t(l.target.error)}).catch(d=>{t(d)})})},async createEnvironmentSetting(s){const d=(await J()).transaction("environmentSetting","readwrite").objectStore("environmentSetting"),r={...s},n=d.add(r);n.onsuccess=f=>{console.log("createEnvironmentSetting sucess")},n.onerror=f=>{console.log("createEnvironmentSetting faild")}},async updateEnvironmentSetting(s){const d=(await J()).transaction("environmentSetting","readwrite").objectStore("environmentSetting"),r={...s},n=d.put(r);n.onsuccess=f=>{console.log("updateEnvironmentSetting sucess")},n.onerror=f=>{console.log("updateEnvironmentSetting faild")}},async deleteEnvironmentSetting(s){const r=(await J()).transaction("environmentSetting","readwrite").objectStore("environmentSetting").delete(s);r.onsuccess=n=>{console.log("delete environmentSetting sucess")},r.onerror=n=>{console.log("delete environmentSetting faild",n.target.error)}},async getFolders(){return new Promise((s,o)=>{J().then(t=>{const n=t.transaction("folders","readonly").objectStore("folders").getAll();n.onsuccess=()=>{s(n.result),console.log("getFolders",n.result)},n.onerror=f=>o(f.target.error)}).catch(t=>{o(t)})})},async createFolder(s){const d=(await J()).transaction("folders","readwrite").objectStore("folders"),r={...s,children:[]};console.log("processedRequestInfo",r);const n=d.add(r);n.onsuccess=f=>{console.log("createFolder sucess")},n.onerror=f=>{console.log("createFolder faild")}},async updateFolder(s){const d=(await J()).transaction("folders","readwrite").objectStore("folders"),r={...s,children:[]},n=d.put(r);n.onsuccess=f=>{console.log("update Folder sucess")},n.onerror=f=>{console.log("update Folder faild")}},async deleteFolder(s){const r=(await J()).transaction("folders","readwrite").objectStore("folders").delete(s);r.onsuccess=n=>{console.log("delete Folder sucess")},r.onerror=n=>{console.log("delete Folder faild",n.target.error)}}};let Se=null;function J(){return Se?Promise.resolve(Se):new Promise((s,o)=>{const t=indexedDB.open("PostApiDB",6);console.log(" openDataBase"),t.onupgradeneeded=d=>{const r=d.target.result;if(console.log("onupgradeneeded"),!r.objectStoreNames.contains("apiTable")){const n=r.createObjectStore("apiTable",{keyPath:"id",autoIncrement:!0});n.createIndex("requestURL","requestURL",{unique:!1}),n.createIndex("interfaceName","interfaceName",{unique:!1}),console.log("created apiTable store",n)}if(!r.objectStoreNames.contains("revisionHistory")){const n=r.createObjectStore("revisionHistory",{keyPath:"id",autoIncrement:!0});console.log("created revisionHistory store",n)}if(!r.objectStoreNames.contains("coverPage")){const n=r.createObjectStore("coverPage",{keyPath:"id",autoIncrement:!0});console.log("created coverPage store",n)}if(!r.objectStoreNames.contains("environmentSetting")){const n=r.createObjectStore("environmentSetting",{keyPath:"id",autoIncrement:!0});console.log("created environmentSetting store",n)}if(!r.objectStoreNames.contains("folders")){const n=r.createObjectStore("folders",{keyPath:"id",autoIncrement:!0});console.log("created folders store",n)}},t.onsuccess=d=>{Se=d.target.result,s(d.target.result),console.log("onsuccess store",Se)},t.onerror=d=>{o(d.target.error),console.log("onerror store",d.target.error)}})}class fe{constructor(){ee(this,"apiList",[]);ee(this,"apiItem",{interfaceName:"",description:"",header:'{ "Authorization" : {{accessKey}} }',requestURL:"",httpMethod:"",donwloadFileName:"",clientType:"",headersContentType:"json",testResult:"",request:[{paramId:this.createId(),parentParamId:"",parameter:"",testValue:null,files:[],level:1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0}],response:[{variableId:this.createId(),parentVariableId:"",variable:"",testValue:null,level:1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0}],requestExample:{},responseExample:""});ee(this,"resultData",{});ee(this,"httpMethodList",[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"GETFILE",value:"GETFILE"}]);ee(this,"clientTypeList",[{label:"관제",value:"관제"},{label:"APP",value:"APP"},{label:"IoT",value:"IoT"},{label:"공통",value:"공통"},{label:"기타",value:"기타"}]);ee(this,"headersContentTypeList",[{label:"application/json",value:"json"},{label:"multipart/form-data",value:"form-data"}]);ee(this,"menuList",[]);ee(this,"menuItem",{id:0,title:"",titleEn:"",path:"",icon:"",stp:0,useYn:"Y"});ee(this,"historyList",[]);ee(this,"coverPageInfo",{title1:"",title2:"",version:"",publishDate:"",creater:"",reviewer:"",approver:"",copyright:"",copyrightDescription:""});ee(this,"environmentSetting",{name:"",host:"",authToken:"",isSelected:!1});ee(this,"environmentSettingList",[]);ee(this,"folders",[]);ee(this,"treeFolders",[])}async sendData(o){const{httpMethod:t,headersContentType:d,donwloadFileName:r,requestURL:n,requestParams:f}=o,l={httpMethod:t,headersContentType:d,donwloadFileName:r,requestURL:n,requestParams:f};console.log("sendData");const b=await G.sendApi(l);return this.resultData=b,b}async getApiList(o){const t=await G.getApiList(o);this.apiList=t,console.log("getApiList",this.apiList)}async getApiInfo(o){return await G.getApiInfo(o)}async createApi(o){return await G.createApi(o)}async updateApi(o){return await G.updateApi(o)}async deleteApi(o){return await G.deleteApi(o)}createId(){return new Date().getTime().toString()}async getMenuList(){const o=await G.getMenuList();this.menuList=o.data[0].children??[]}async getHistoryList(){const o=await G.getHistoryList();this.historyList=o}async createHistory(o){return await G.createHistory(o)}async updateHistory(o){return await G.updateHistory(o)}async deleteHistory(o){return await G.deleteHistory(o)}async getCoverPage(){const o=await G.getCoverPage();this.coverPageInfo=Object.assign({},this.coverPageInfo,o)}async createCoverPage(o){return await G.createCoverPage(o)}async updateCoverPage(o){return await G.updateCoverPage(o)}async getEnvironmentSettingList(){const o=await G.getEnvironmentSettingList();this.environmentSettingList=o,console.log("environmentSettingList",this.environmentSettingList)}async getEnvironmentSetting(){await this.getEnvironmentSettingList();const o=this.environmentSettingList.find(t=>t.isSelected===!0);this.environmentSetting=Object.assign({},this.environmentSetting,o)}async createEnvironmentSetting(o){return await G.createEnvironmentSetting(o)}async updateEnvironmentSetting(o){return await G.updateEnvironmentSetting(o)}async deleteEnvironmentSetting(o){return await G.deleteEnvironmentSetting(o)}async getFolders(){const o=await G.getFolders();if(o){console.log("folders",o),this.treeFolders=[],this.folders=o;const t=new Map;this.folders.forEach(d=>{t.set(d.folderId,d)}),this.folders.forEach(d=>{if(!d.parentFolderId)this.treeFolders.push(d);else{const r=t.get(d.parentFolderId);r&&r.children.push(d)}}),console.log("getFolders",this.treeFolders)}}async createFolder(o){return await G.createFolder(o)}async updateFolder(o){return await G.updateFolder(o)}async deleteFolder(o){return await G.deleteFolder(o)}}let Vt=ot(()=>import("./XLSX.min-BZs0bBeJ.js"),[]),ze=document.createElement("script");ze.contains=Vt;document.head.appendChild(ze);let Fe={};Fe.make=function(s,o){let t=XLSX.utils.book_new();t.Props={Title:o,Subject:o,Author:"Dev.monter",CreatedDate:new Date};let d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"];s.forEach(function(r){let n=0,f=r.data.length,l={},b=[];r.data.forEach(function(p,v){let x=v,h=-1;p.forEach(function(g){h++;for(let m=0;m<b.length;m++){let T=b[m];T.s.c<=h&&h<=T.e.c&&T.s.r<=x&&x<=T.e.r&&(h+=T.e.c-h+1)}let u=d[h]+String(x+1);l[u]||(l[u]={t:"s",v:g.text||"",s:{alignment:{wrapText:!0}},l:{Target:g.link||""}}),g.img&&(l["!images"]||(l["!images"]=[]),l["!images"].push({"!link":g.img.src,"!pos":{c:h,r:x,x:g.img.left,y:g.img.top,w:g.img.width,h:g.img.height},"!datatype":"remote"}));for(let m in g.style)switch(m){case"backgroundColor":l[u].s.fgColor={rgb:g.style[m].replace("#","")};break;case"border":var k=g.style[m].split(" "),L="",w=k[2].replace("#","");k[0]==="1px"?L="thin":k[0]==="2px"?L="medium":L="thick",g.colspan=g.colspan||1,g.rowspan=g.rowspan||1;for(let T=0;T<g.colspan;T++){let R=h+T,E=d[R]+String(x+1);l[E]||(l[E]={t:"s",s:{},v:"undefined"}),l[E].s.top={style:L,color:{rgb:w}},l[E].s.bottom={style:L,color:{rgb:w}},l[E].s.left={style:L,color:{rgb:w}},l[E].s.right={style:L,color:{rgb:w}},n<R&&(n=R);for(let Y=0;Y<g.rowspan;Y++){let N=x+1+Y,W=d[R]+String(N);l[W]||(l[W]={t:"s",s:{},v:"undefined"}),l[W].s.top={style:L,color:{rgb:w}},l[W].s.bottom={style:L,color:{rgb:w}},l[W].s.left={style:L,color:{rgb:w}},l[W].s.right={style:L,color:{rgb:w}},f<x+1+Y&&(f=x+1+Y)}}break;case"borderTop":case"borderLeft":case"borderBottom":case"borderRight":var $="";m==="borderTop"?$="top":m==="borderLeft"?$="left":m==="borderBottom"?$="bottom":m==="borderRight"&&($="right");var U=g.style[m].split(" "),I="",V=U[2].replace("#","");if(U[0]==="1px"?I="thin":U[0]==="2px"?I="medium":I="thick",l[u].s[$]={style:I,color:{rgb:V}},m==="borderTop"||m==="borderBottom")for(let T=1;T<g.colspan;T++){let R=d[h+T]+String(x+1);l[R]||(l[R]={t:"s",s:{},v:"undefined",z:"General"}),l[R].s[$]={style:I,color:{rgb:V}}}if(m==="borderLeft"||m==="borderRight")for(let T=1;T<g.rowspan;T++){let R=d[h]+String(x+1+T);l[R]||(l[R]={t:"s",s:{},v:"undefined",z:"General"}),l[R].s[$]={style:I,color:{rgb:V}}}break;case"textAlign":l[u].s.alignment||(l[u].s.alignment={}),l[u].s.alignment.horizontal=g.style[m];break;case"verticalAlign":switch(l[u].s.alignment||(l[u].s.alignment={}),g.style[m]){case"middle":l[u].s.alignment.vertical="center";break;default:l[u].s.alignment.vertical=g.style[m];break}break;case"width":l["!cols"]||(l["!cols"]=[]),typeof g.style[m]=="number"?l["!cols"][h]={wpx:g.style[m]}:g.style[m]==="auto"&&(l["!cols"][h]={auto:1});break;case"height":l["!rows"]||(l["!rows"]=[]),typeof g.style[m]=="number"?l["!rows"][x]={hpx:g.style[m]}:g.style[m]==="auto"&&(l["!rows"][x]={auto:1});break;case"fontSize":l[u].s.sz=g.style[m];break;case"underline":l[u].s.underline=g.style[m];break;case"color":l[u].s.color={theme:1,rgb:g.style[m].replace("#","")},console.log("ws[cr].s",l[u].s,g.style[m]),console.log("cr",u),console.log("ws",l);break;case"fontFamily":l[u].s.name=g.style[m];break;case"fontWeight":g.style[m]==="bold"&&(l[u].s.bold=1);break;case"whiteSpace":g.style[m]==="nowrap"&&(l[u].s.alignment.wrapText=!1);break}if(g.colspan>1||g.rowspan>1){let m={c:h,r:x},T={c:g.colspan?h+g.colspan-1:h,r:g.rowspan?x+g.rowspan-1:x};b.push({s:m,e:T})}}),n<h&&(n=h)});let q=`A1:${d[n]}${f}`;l["!ref"]=q,l["!merges"]=b,t.SheetNames.push(r.name),t.Sheets[r.name]=l}),XLSX.writeFile(t,o+".xlsx",{cellStyles:!0,bookImages:!0,bookSST:!1})};const Et=(s,o,t)=>{const d=s.request??[],r=s.response??[],n={height:24,width:1},f={verticalAlign:"middle",textAlign:"center",backgroundColor:"#b8cce4",fontSize:18,fontWeight:"bold",border:"1px solid #000000",height:24},l={verticalAlign:"middle",textAlign:"center",backgroundColor:"#d1d1d1",fontSize:12,fontWeight:"bold",border:"1px solid #000000"},b={textAlign:"center",border:"1px solid #000000",verticalAlign:"middle",backgroundColor:"#f1f1f1",fontWeight:"bold",fontSize:10},q={textAlign:"center",border:"1px solid #000000",verticalAlign:"middle",backgroundColor:"#f1f1f1",fontSize:10,width:140,height:24},p={textAlign:"left",border:"1px solid #000000",verticalAlign:"middle",fontSize:10,width:140,height:24},v={width:140,fontSize:10,textAlign:"center",border:"1px solid #000000",verticalAlign:"middle"},x={height:400,verticalAlign:"middle",border:"1px solid #000000"},h={name:"Sheet1",data:[]};o&&(h.data.push([{text:o??"",colspan:7,rowspan:2,style:Object.assign({},f)},{},{},{},{},{},{}]),h.data.push([{style:n},{},{},{},{},{},{}])),[[{text:"인터페이스명",style:q},{text:s.interfaceName??"",colspan:6,style:p},{},{},{},{},{}],[{text:"설명",style:q},{text:s.description??"",colspan:6,style:p},{},{},{},{},{}],[{text:"Header",style:q},{text:s.header??"",colspan:6,style:p},{},{},{},{},{}],[{text:"Request URL",style:q},{text:s.requestURL??"",colspan:6,style:p},{},{},{},{},{}],[{text:"HTTP Method",style:q},{text:s.httpMethod??"",colspan:2,style:p},{text:"Required",style:q},{text:"Y: 필수",colspan:3,style:p},{},{},{}],[{text:"Request",colspan:7,style:Object.assign({},l,{height:30})},{},{},{},{},{},{}],[{text:"Parameter",colspan:4,style:b},{text:"Required",style:b},{text:"Type",style:b},{text:"Description",style:b},{},{},{}]].forEach(u=>{h.data.push(u)}),d.forEach(u=>{u.level===1&&h.data.push([{text:u.parameter??"",style:v},{text:"",style:v},{text:"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===2&&h.data.push([{text:"",style:v},{text:u.parameter??"",style:v},{text:"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===3&&h.data.push([{text:"",style:v},{text:"",style:v},{text:u.parameter??"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===4&&h.data.push([{text:"",style:v},{text:"",style:v},{text:"",style:v},{text:u.parameter??"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}])}),h.data.push([{text:"Response",colspan:7,style:Object.assign({},l,{height:30})},{},{},{},{},{},{}]),h.data.push([{text:"Variable",colspan:4,style:b},{text:"Required",style:b},{text:"Type",style:b},{text:"Description",style:b},{},{},{}]),r.forEach(u=>{u.level===1&&h.data.push([{text:u.variable??"",style:v},{text:"",style:v},{text:"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===2&&h.data.push([{text:"",style:v},{text:u.variable??"",style:v},{text:"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===3&&h.data.push([{text:"",style:v},{text:"",style:v},{text:u.variable??"",style:v},{text:"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}]),u.level===4&&h.data.push([{text:"",style:v},{text:"",style:v},{text:"",style:v},{text:u.variable??"",style:v},{text:u.requiredYn??"",style:v},{text:u.type??"",style:v},{text:u.description??"",style:v}])}),h.data.push([{text:"Request Example",colspan:7,style:Object.assign({},l,{height:30})},{},{},{},{},{},{}]),h.data.push([{text:`${s.requestExample?JSON.stringify(s.requestExample??"",null,2):""}`,colspan:7,style:x},{},{},{},{},{},{}]),h.data.push([{text:"Response Example",colspan:7,style:Object.assign({},l,{height:30})},{},{},{},{},{},{}]),h.data.push([{text:`${s.responseExample?JSON.stringify(s.responseExample??"",null,2):""}`,colspan:7,style:x},{},{},{},{},{},{}]),console.log("sheet1.data",h.data),Fe.make([h],t)},Tt=(s,o,t,d)=>{var I;const r={height:24,width:1},n={verticalAlign:"middle",textAlign:"center",backgroundColor:"#b8cce4",fontSize:18,fontWeight:"bold",borderLeft:"1px solid #000000",borderBottom:"1px solid #000000",borderTop:"1px solid #000000",height:24,fontFamily:"맑은 고딕"},f={verticalAlign:"middle",textAlign:"center",backgroundColor:"#d1d1d1",fontSize:11,fontWeight:"bold",border:"1px solid #000000",fontFamily:"맑은 고딕"},l={textAlign:"center",border:"1px solid #000000",verticalAlign:"middle",backgroundColor:"#f1f1f1",fontWeight:"bold",fontSize:10,fontFamily:"맑은 고딕"},b={textAlign:"center",border:"1px solid #000000",verticalAlign:"middle",backgroundColor:"#f1f1f1",fontSize:10,width:140,height:24,fontFamily:"맑은 고딕"},q={textAlign:"left",border:"1px solid #000000",verticalAlign:"middle",fontSize:10,width:140,height:24,fontFamily:"맑은 고딕"},p={width:140,fontSize:10,textAlign:"center",border:"1px solid #000000",verticalAlign:"middle",fontFamily:"맑은 고딕"},v={height:350,verticalAlign:"middle",border:"1px solid #000000"},x=[],h={verticalAlign:"center",textAlign:"left",fontSize:28,fontWeight:"bold",height:80,width:350,backgroundColor:"#f9f9f9",fontFamily:"맑은 고딕"},g={verticalAlign:"center",textAlign:"center",fontSize:11,height:20,width:140,border:"1px solid #000000",backgroundColor:"#f9f9f9",fontFamily:"맑은 고딕"},u={backgroundColor:"#f9f9f9",height:30},k={backgroundColor:"#f9f9f9",width:40},L={verticalAlign:"center",textAlign:"center",fontSize:8,height:24,backgroundColor:"#f9f9f9",fontFamily:"맑은 고딕"},w={name:"표지",data:[]};w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:"",style:k},{text:s.title1??"",colspan:7,style:Object.assign({},h)}]),w.data.push([{text:"",style:k},{text:s.title2??"",colspan:7,style:Object.assign({},h,{borderBottom:"1px solid #000000"})}]),w.data.push([{text:"",style:k},{text:s.version??"",colspan:7,style:Object.assign({},h,{fontSize:30})}]),w.data.push([{text:"",colspan:8,style:Object.assign({},u)}]),w.data.push([{text:"",colspan:5,style:u},{text:"배 포 일",style:g},{text:((I=at(s.publishDate))==null?void 0:I.format("YYYY-MM-DD"))??"",style:g},{text:"",style:k}]),w.data.push([{text:"",colspan:5,style:u},{text:"작 성 자",style:g},{text:s.creater??"",style:g},{text:"",style:k}]),w.data.push([{text:"",colspan:5,style:u},{text:"검 토 자",style:g},{text:s.reviewer??"",style:g},{text:"",style:k}]),w.data.push([{text:"",colspan:5,style:u},{text:"승 인 자",style:g},{text:s.approver??"",style:g},{text:"",style:k}]),w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:"",colspan:8,style:u}]),w.data.push([{text:s.copyright??"",colspan:8,style:Object.assign({},L,{borderTop:"1px solid #000000"})}]),w.data.push([{text:s.copyrightDescription??"",colspan:8,style:Object.assign({},L)}]),x.push(w);const $={name:"개정이력",data:[]};$.data.unshift([{style:r}]),$.data.unshift([{text:$.name??"",colspan:7,rowspan:2,style:Object.assign({},n)},{style:r}]),$.data.push([{text:"버전",style:f},{text:"변경일",style:f},{text:"구분",style:f},{text:"내용",style:f},{text:"작성자",style:f},{text:"검토자",style:f},{text:"승인자",style:f}]),o.forEach(V=>{$.data.push([{text:V.version??"",style:p},{text:V.updateDate??"",style:p},{text:V.updateType??"",style:p},{text:V.content??"",style:Object.assign({},p,{width:500})},{text:V.creater??"",style:p},{text:V.reviewer??"",style:p},{text:V.approver??"",style:p}])}),x.push($);const U={name:"인터페이스 목록",data:[]};U.data.unshift([{style:r}]),U.data.unshift([{text:U.name??"",colspan:5,rowspan:2,style:Object.assign({},n)},{style:r}]),U.data.push([{text:"인터페이스 명",style:f},{text:"Request URL",style:f},{text:"Http Method",style:f},{text:"설명",style:f},{text:"구분",style:f}]),t.forEach(V=>{U.data.push([{text:V.interfaceName??"",style:Object.assign({},p,{width:300})},{text:V.requestURL??"",link:`#${V.requestURL??""}!G1`,style:Object.assign({},p,{underline:!0,width:400})},{text:V.httpMethod??"",style:p},{text:V.description??"",style:Object.assign({},p,{width:500})},{text:V.clientType??"",style:p}])}),x.push(U);for(const V of t){const m=V.request??[],T=V.response??[],R=V.requestExample?JSON.parse(V.requestExample):"",E=V.responseExample?JSON.parse(V.responseExample):"",Y=V.interfaceName??"",N={name:V.interfaceName??"",data:[]};Y&&(N.data.unshift([{style:r}]),N.data.unshift([{text:Y,colspan:6,rowspan:2,style:Object.assign({},n)},{text:"목록",link:"#인터페이스 목록!A1",rowspan:2,style:{fontSize:12,textAlign:"center",backgroundColor:"#b8cce4",underline:!0,color:"red",borderRight:"1px solid #000000",verticalAlign:"middle"}},{style:r}]));const W=[[{text:"인터페이스명",style:b},{text:V.interfaceName??"",colspan:6,style:q}],[{text:"설명",style:b},{text:V.description??"",colspan:6,style:q}],[{text:"Header",style:b},{text:V.header??"",colspan:6,style:q}],[{text:"Request URL",style:b},{text:V.requestURL??"",colspan:6,style:q}],[{text:"HTTP Method",style:b},{text:V.httpMethod??"",colspan:2,style:q},{text:"Required",style:b},{text:"Y: 필수",colspan:3,style:q}],[{text:"Request",colspan:7,style:Object.assign({},f,{height:30})}],[{text:"Parameter",colspan:4,style:l},{text:"Required",style:l},{text:"Type",style:l},{text:"Description",style:l}]];N.data.push(...W),m.forEach(S=>{S.level===1&&N.data.push([{text:S.parameter??"",style:p},{text:"",style:p},{text:"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===2&&N.data.push([{text:"",style:p},{text:S.parameter??"",style:p},{text:"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===3&&N.data.push([{text:"",style:p},{text:"",style:p},{text:S.parameter??"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===4&&N.data.push([{text:"",style:p},{text:"",style:p},{text:"",style:p},{text:S.parameter??"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}])}),N.data.push([{text:"Response",colspan:7,style:Object.assign({},f,{height:30})}]),N.data.push([{text:"Variable",colspan:4,style:l},{text:"Required",style:l},{text:"Type",style:l},{text:"Description",style:l}]),T.forEach(S=>{S.level===1&&N.data.push([{text:S.variable??"",style:p},{text:"",style:p},{text:"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===2&&N.data.push([{text:"",style:p},{text:S.variable??"",style:p},{text:"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===3&&N.data.push([{text:"",style:p},{text:"",style:p},{text:S.variable??"",style:p},{text:"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}]),S.level===4&&N.data.push([{text:"",style:p},{text:"",style:p},{text:"",style:p},{text:S.variable??"",style:p},{text:S.requiredYn??"",style:p},{text:S.type??"",style:p},{text:S.description??"",style:p}])}),N.data.push([{text:"Request Example",colspan:7,style:Object.assign({},f,{height:30})}]),N.data.push([{text:`${V.requestExample?JSON.stringify(R??"",null,2):""}`,colspan:7,style:v}]),N.data.push([{text:"Response Example",colspan:7,style:Object.assign({},f,{height:30})}]),N.data.push([{text:`${V.responseExample?JSON.stringify(E??"",null,2):""}`,colspan:7,style:v}]),x.push(N)}Fe.make(x,d)},kt={key:0},Ct={key:0},wt={key:0},Rt={key:0},It={key:0},At={key:0},Pt={key:0},Lt=ce({__name:"RevisionHistoryDialog",setup(s,{expose:o}){const t=ue(new fe),d=M(!1),r=()=>({version:"",updateDate:"",updateType:"",content:"",creater:"",reviewer:"",approver:""}),n=M(0),f=u=>{n.value=u.scrollTop},l=M(null),b=()=>{t.historyList.push(r()),st(()=>{l.value.setScrollTop(n.value+100)})},q=u=>{Object.keys(u.row).includes("id")?me("삭제하시겠습니까","확인","YN").onConfirm(()=>{t.deleteHistory(u.row.id).then(k=>{H.success("삭제 성공"),t.getHistoryList()}).catch(k=>{H.error(k)})}).onCancel(()=>{}):t.historyList.splice(u.$index,1)},p=()=>{const u=t.historyList.filter(L=>!("id"in L));let k=!0;u.forEach(L=>{if(console.log(L),!L.version||!L.updateType||!L.content||!L.creater){H.error("필수값이 누락되어 있습니다."),k=!1;return}}),k&&me("저장하시겠습니까","확인","YN").onConfirm(()=>{u.forEach(L=>{t.createHistory(L).then(w=>{X.success("저장 성공"),t.getHistoryList()}).catch(w=>{H.error(w)})})}).onCancel(()=>{})},v=(u,k)=>{u.updateType=k},x=()=>{h()},h=()=>{d.value=!1};return o({openDialog:async()=>{d.value=!0,t.getHistoryList()}}),(u,k)=>{const L=he,w=Ee,$=nt,U=Ae,I=be,V=Ve;return P(),z(ve(Te),{"model-value":d.value,title:"개정이력",description:"",width:"1300",style:{height:"90%"},buttonTypes:["저장","취소"],onOnSave:p,onOnCancel:x,onOnClose:h},{default:a(()=>[k[6]||(k[6]=C("ol",{class:"page-description"},[C("li",null,[A(" 버전: 초안은 0.1으로 표시 하고, 검토 된 이후 승인을 득한 이후에는 1.0부터 시작하여 정수 단위로 변경 관리 함."),C("br"),A(" 변경 발생 시, 소수점 아래 번호로 관리하고, 목차 내용이 바뀔 정도의 큰 변경이 발생하면 상위 정수를 변경 함. (예, V1.2 : 2번 수정됨, 목차 내용이 변경되면 V2.0 이 됨) ")]),C("li",null,"구분 : 변경 내용이 이전 문서에 대해 신규/추가/수정/삭제 인지 선택 기입"),C("li",null,"내용 : 변경 내용을 자세히 기록(변경된 회의록, 면담 위치, 즉 페이지 번호와 변경 내용을 기술한다.)")],-1)),e(V,{ref_key:"tableRef",ref:l,data:t.historyList,onScroll:f},{default:a(()=>[e(w,{prop:"version",width:"80"},{header:a(()=>k[0]||(k[0]=[A(" 버전 ",-1),C("span",{style:{color:"red"}},"*",-1)])),default:a(({row:m})=>[m.id?(P(),te("div",kt,Q(m.version),1)):(P(),z(L,{key:1,modelValue:m.version,"onUpdate:modelValue":T=>m.version=T},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{prop:"updateDate",label:"변경일",width:"150"},{default:a(({row:m})=>[m.id?(P(),te("div",Ct,Q(m.updateDate),1)):(P(),z($,{key:1,width:"130px",modelValue:m.updateDate,"onUpdate:modelValue":T=>m.updateDate=T,type:"date",placeholder:"변경일 선택"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{prop:"updateType",width:"180"},{header:a(()=>k[1]||(k[1]=[A(" 구분 ",-1),C("span",{style:{color:"red"}},"*",-1)])),default:a(({row:m})=>[m.id?(P(),te("div",wt,Q(m.updateType),1)):(P(),z(U,{key:1,width:"160px",modelValue:m.clientType,"onUpdate:modelValue":T=>m.clientType=T,placeholder:"Client Type 선택",list:t.clientTypeList,"option-label":"label","option-value":"value",onOnChange:T=>v(m,T)},null,8,["modelValue","onUpdate:modelValue","list","onOnChange"]))]),_:1}),e(w,{prop:"content"},{header:a(()=>k[2]||(k[2]=[A(" 내용 ",-1),C("span",{style:{color:"red"}},"*",-1)])),default:a(({row:m})=>[m.id?(P(),te("div",Rt,Q(m.content),1)):(P(),z(L,{key:1,modelValue:m.content,"onUpdate:modelValue":T=>m.content=T},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{prop:"creater",width:"120"},{header:a(()=>k[3]||(k[3]=[A(" 작성자 ",-1),C("span",{style:{color:"red"}},"*",-1)])),default:a(({row:m})=>[m.id?(P(),te("div",It,Q(m.creater),1)):(P(),z(L,{key:1,modelValue:m.creater,"onUpdate:modelValue":T=>m.creater=T},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{prop:"reviewer",label:"검토자",width:"120"},{default:a(({row:m})=>[m.id?(P(),te("div",At,Q(m.reviewer),1)):(P(),z(L,{key:1,modelValue:m.reviewer,"onUpdate:modelValue":T=>m.reviewer=T},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{prop:"approver",label:"승인자",width:"120"},{default:a(({row:m})=>[m.id?(P(),te("div",Pt,Q(m.approver),1)):(P(),z(L,{key:1,modelValue:m.approver,"onUpdate:modelValue":T=>m.approver=T},null,8,["modelValue","onUpdate:modelValue"]))]),_:1}),e(w,{width:"120"},{default:a(m=>[e(I,{type:"danger",plain:"",onClick:qe(T=>q(m),["prevent"])},{default:a(()=>k[4]||(k[4]=[A(" 삭제 ",-1)])),_:2,__:[4]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(I,{type:"success",plain:"",style:{width:"100%"},onClick:b},{default:a(()=>k[5]||(k[5]=[A(" 추가 ",-1)])),_:1,__:[5]})]),_:1,__:[6]},8,["model-value"])}}}),Ut=pe(Lt,[["__scopeId","data-v-7b0f9c7b"]]),Dt=ce({__name:"CoverPageDialog",setup(s,{expose:o}){const t=ue(new fe),d=M(!1),r=()=>{me("저장하시겠습니까","확인","YN").onConfirm(()=>{t.coverPageInfo.id?t.updateCoverPage(t.coverPageInfo).then(b=>{X.success("저장 성공"),f()}).catch(b=>{H.error(b)}):t.createCoverPage(t.coverPageInfo).then(b=>{X.success("저장 성공"),f()}).catch(b=>{H.error(b)})}).onCancel(()=>{})},n=()=>{f()},f=()=>{d.value=!1};return o({openDialog:async()=>{d.value=!0,t.getCoverPage()}}),(b,q)=>{const p=he,v=Ce,x=rt,h=ke;return P(),z(ve(Te),{"model-value":d.value,title:"표지",description:"",width:"800",style:{height:"70%"},buttonTypes:["저장","취소"],onOnSave:r,onOnCancel:n,onOnClose:f},{default:a(()=>[e(h,{class:"detail-form",model:t.coverPageInfo,ref:"ruleFormRef","label-position":"left",size:"large","label-width":"auto","require-asterisk-position":"right"},{default:a(()=>[e(v,{prop:"title1",label:"타이틀1"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.title1,"onUpdate:modelValue":q[0]||(q[0]=g=>t.coverPageInfo.title1=g),placeholder:"타이틀을 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"title2",label:"타이틀2"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.title2,"onUpdate:modelValue":q[1]||(q[1]=g=>t.coverPageInfo.title2=g),placeholder:"타이틀을 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"version",label:"버전"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.version,"onUpdate:modelValue":q[2]||(q[2]=g=>t.coverPageInfo.version=g),placeholder:"버전을 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"publishDate",label:"배포일"},{default:a(()=>[e(x,{modelValue:t.coverPageInfo.publishDate,"onUpdate:modelValue":q[3]||(q[3]=g=>t.coverPageInfo.publishDate=g),type:"date",placeholder:"배포일 선택"},null,8,["modelValue"])]),_:1}),e(v,{prop:"creater",label:"작성자"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.creater,"onUpdate:modelValue":q[4]||(q[4]=g=>t.coverPageInfo.creater=g),placeholder:"작성자를 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"reviewer",label:"검토자"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.reviewer,"onUpdate:modelValue":q[5]||(q[5]=g=>t.coverPageInfo.reviewer=g),placeholder:"검토자를 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"approver",label:"승인자"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.approver,"onUpdate:modelValue":q[6]||(q[6]=g=>t.coverPageInfo.approver=g),placeholder:"승인자를 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"copyright",label:"Copyright"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.copyright,"onUpdate:modelValue":q[7]||(q[7]=g=>t.coverPageInfo.copyright=g),placeholder:"Copyright를 입력해주세요"},null,8,["modelValue"])]),_:1}),e(v,{prop:"copyrightDescription",label:"Copyright 설명"},{default:a(()=>[e(p,{modelValue:t.coverPageInfo.copyrightDescription,"onUpdate:modelValue":q[8]||(q[8]=g=>t.coverPageInfo.copyrightDescription=g),placeholder:"Copyright 설명을 입력해주세요"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value"])}}}),Ft=pe(Dt,[["__scopeId","data-v-916d14e4"]]),Nt={style:{"padding-right":"40px","white-space":"nowrap",overflow:"hidden"}},Ot={class:"dialog-footer"},jt=ce({__name:"EnvironmentSettingDialog",setup(s,{expose:o}){const t=ue(new fe),d=M(!1),r=M(null),n=M({name:"",host:"",authToken:"",isSelected:!1}),f=U=>{n.value=He.getTableSelection(r,U)[0]},l=()=>{var I;if(!n.value){H.warning("설정항목을 선택해주세요.");return}const U=(I=n.value)==null?void 0:I.id;n.value.isSelected=!0,t.environmentSettingList.forEach(V=>{U===V.id?V.isSelected=!0:V.isSelected=!1}),Promise.all(t.environmentSettingList.map(V=>t.updateEnvironmentSetting(V))).then(V=>{X.success("저장 성공"),De().setEnvironmentSetting(n.value),q()}).catch(V=>{H.error(V)})},b=()=>{q()},q=()=>{d.value=!1,r.value.clearSelection()},p=async()=>{await t.getEnvironmentSettingList(),t.environmentSettingList.forEach(U=>{U.isSelected&&r.value.toggleRowSelection(U,!0)})};o({openDialog:async()=>{d.value=!0,p()}});const x=M({name:"",host:"",authToken:"",isSelected:!1}),h=M(!1),g=M(""),u=U=>{U?(x.value=Object.assign({},x.value,U),g.value="환경 설정 수정",console.log("form.value",x.value)):g.value="환경 설정 등록",h.value=!0},k=()=>{h.value=!1,x.value={name:"",host:"",authToken:"",isSelected:!1},g.value=""},L=()=>{g.value.includes("등록")?t.createEnvironmentSetting(x.value).then(U=>{X.success("저장 성공"),k(),p()}).catch(U=>{H.error(U)}):t.updateEnvironmentSetting(x.value).then(U=>{X.success("수정 성공"),k(),p()}).catch(U=>{H.error(U)})},w=U=>{me("환경설정을 삭제 하시겠습니까?","확인","CONFIRM_YN").onConfirm(()=>{t.deleteEnvironmentSetting(U.id).then(I=>{X.success("삭제 성공"),p()}).catch(I=>{H.error(I)})}).onCancel(()=>{})},$=(U,I)=>{X.success(`내용을 복사 하였습니다. 
  ${U[I.property]}`),navigator.clipboard.writeText(U[I.property])};return(U,I)=>{const V=be,m=Le,T=Ee,R=Ve,E=he,Y=Ce,N=ke,W=Me;return P(),te(Pe,null,[e(ve(Te),{"model-value":d.value,title:"환경 설정",description:"",width:"1000",style:{height:"70%"},buttonTypes:["저장","취소"],onOnSave:l,onOnCancel:b,onOnClose:q},{default:a(()=>[e(m,{total:t.environmentSettingList.length??0,"bottom-line":""},{default:a(()=>[e(V,{type:"primary",onClick:u},{default:a(()=>I[4]||(I[4]=[A("등록",-1)])),_:1,__:[4]})]),_:1},8,["total"]),e(R,{data:t.environmentSettingList,ref_key:"tableRef",ref:r,onSelectionChange:f,onCellDblclick:$},{default:a(()=>[e(T,{type:"selection",width:"40"}),e(T,{label:"NO",type:"index",width:"60"}),e(T,{label:"Name",prop:"name",width:"150"}),e(T,{label:"Host",prop:"host"}),e(T,{label:"AuthToken",prop:"authToken"},{default:a(({row:S})=>[C("div",Nt,Q(S.authToken),1)]),_:1}),e(T,{width:"120px"},{default:a(({row:S})=>[e(V,{text:"",icon:"Edit",onClick:ye=>u(S)},null,8,["onClick"]),e(V,{text:"",type:"danger",icon:"Delete",onClick:ye=>w(S)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model-value"]),e(W,{modelValue:h.value,"onUpdate:modelValue":I[3]||(I[3]=S=>h.value=S),title:g.value,width:"600px",top:"180px",onClose:k},{footer:a(()=>[C("span",Ot,[e(V,{onClick:k,class:"POST"},{default:a(()=>I[5]||(I[5]=[A("취소",-1)])),_:1,__:[5]}),e(V,{type:"primary",onClick:L,class:"POST"},{default:a(()=>I[6]||(I[6]=[A("확인",-1)])),_:1,__:[6]})])]),default:a(()=>[e(N,{class:"detail-form",model:x.value,ref:"ruleFormRef","label-position":"left",size:"large","label-width":"auto","require-asterisk-position":"right"},{default:a(()=>[e(Y,{prop:"name",label:"Name"},{default:a(()=>[e(E,{modelValue:x.value.name,"onUpdate:modelValue":I[0]||(I[0]=S=>x.value.name=S),placeholder:"Name을 입력해주세요"},null,8,["modelValue"])]),_:1}),e(Y,{prop:"host",label:"Host"},{default:a(()=>[e(E,{modelValue:x.value.host,"onUpdate:modelValue":I[1]||(I[1]=S=>x.value.host=S),placeholder:"Host를 입력해주세요"},null,8,["modelValue"])]),_:1}),e(Y,{prop:"token",label:"AuthToken"},{default:a(()=>[e(E,{type:"text",modelValue:x.value.authToken,"onUpdate:modelValue":I[2]||(I[2]=S=>x.value.authToken=S),placeholder:"AuthToken을 입력해주세요"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),$t=pe(jt,[["__scopeId","data-v-6eab7a3c"]]),Mt={class:"dialog-footer"},Ht=ce({__name:"FolderDialog",emits:["onConfirm"],setup(s,{expose:o,emit:t}){const d=new fe,r=M(""),n=M(!1),f=M({folderId:"",parentFolderId:"",folderName:"",requestURL:"",isOpen:!0,children:[]}),l={folderName:[{required:!0,trigger:"blur"}],requestURL:[{required:!0,trigger:"blur"}]},b=(x,h)=>{n.value=!0,r.value="폴더"+x,h&&x==="수정"?f.value={...h}:(h&&x==="추가"&&(f.value.parentFolderId=h.folderId),f.value.folderId=d.createId())},q=t,p=()=>{console.log("folderForm.value",f.value),q("onConfirm",f.value),v()},v=()=>{n.value=!1,f.value={folderId:"",parentFolderId:"",folderName:"",requestURL:"",isOpen:!0,children:[]}};return o({openDialog:b}),(x,h)=>{const g=he,u=Ce,k=ke,L=be,w=Me;return P(),z(w,{modelValue:n.value,"onUpdate:modelValue":h[2]||(h[2]=$=>n.value=$),title:"폴더 등록",width:"500px",onClose:v},{footer:a(()=>[C("span",Mt,[e(L,{onClick:v,class:"POST"},{default:a(()=>h[3]||(h[3]=[A("취소",-1)])),_:1,__:[3]}),e(L,{type:"primary",onClick:p,class:"POST"},{default:a(()=>h[4]||(h[4]=[A("확인",-1)])),_:1,__:[4]})])]),default:a(()=>[e(k,{ref:"regForm",rules:l,model:f.value,"label-position":"left","label-width":"80px"},{default:a(()=>[e(u,{label:"폴더 명",prop:"title"},{default:a(()=>[e(g,{modelValue:f.value.folderName,"onUpdate:modelValue":h[0]||(h[0]=$=>f.value.folderName=$),"show-word-limit":"",maxlength:"20"},null,8,["modelValue"])]),_:1}),e(u,{label:"경로"},{default:a(()=>[e(g,{modelValue:f.value.requestURL,"onUpdate:modelValue":h[1]||(h[1]=$=>f.value.requestURL=$),"show-word-limit":"",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Yt=pe(Ht,[["__scopeId","data-v-8de194b2"]]),zt={class:"folders"},Bt={class:"colletions-title"},Gt={style:{display:"flex",gap:"8px"}},Jt={class:"folder-item"},Xt={class:"folder-item-label"},Kt={class:"folder-btn"},Qt=ce({__name:"FolderTree",emits:["onClikNode"],setup(s,{emit:o}){const t=ue(new fe),d={children:"children",label:"folderName"},r=M(null);it(()=>{t.getFolders()});const n=x=>{x.id?t.updateFolder(x).then(h=>{H.success("성공","폴더 수정 성공!"),t.getFolders()}):t.createFolder(x).then(h=>{H.success("성공","폴더 추가 성공!"),t.getFolders()})},f=()=>{r.value.openDialog("추가")},l=x=>{console.log("addFolder",x),r.value.openDialog("추가",x)},b=x=>{r.value.openDialog("수정",x)},q=x=>{if(console.log("deleteFolder",x),x.children.length>0){H.warning("폴더 아래 자식 폴더가 있습니다. 자식 폴더를 먼저 삭제 하시고 다시 진행해 주세요.");return}me(x.folderName+" 폴더를 삭제 하시겠습니까?","확인","CONFIRM_YN").onConfirm(()=>{x.id&&t.deleteFolder(x.id).then(h=>{H.success("성공","삭제 성공!"),t.getFolders()})}).onCancel(()=>{})},p=o,v=x=>{x.children.length&&(x.isOpen=!x.isOpen),p("onClikNode",x.requestURL)};return(x,h)=>{const g=de("FolderAdd"),u=Ue,k=Ye,L=de("FolderOpened"),w=de("Folder"),$=de("FolderRemove"),U=de("Edit"),I=dt;return P(),te(Pe,null,[C("div",zt,[C("div",Bt,[h[0]||(h[0]=A(" 폴더 목록 ",-1)),C("div",Gt,[e(k,{content:"Add Folder","hide-after":0},{default:a(()=>[e(u,{size:20,onClick:f},{default:a(()=>[e(g,{style:{width:"18px",height:"18px",cursor:"pointer"}})]),_:1})]),_:1})])]),e(I,{class:"tree",ref:"treeRef","node-key":"folderId",data:t.treeFolders,props:d,"highlight-current":"","default-expand-all":"",onNodeClick:v},{default:a(({node:V,data:m})=>[C("div",Jt,[C("div",Xt,[m.isOpen?(P(),z(u,{key:0},{default:a(()=>[e(L)]),_:1})):(P(),z(u,{key:1},{default:a(()=>[e(w)]),_:1})),A(" "+Q(V.label),1)]),C("div",Kt,[e(k,{content:"Add Folder","hide-after":0},{default:a(()=>[e(u,{onClick:qe(T=>l(m),["stop"])},{default:a(()=>[e(g)]),_:2},1032,["onClick"])]),_:2},1024),e(k,{content:"Remove Folder","hide-after":0},{default:a(()=>[e(u,{onClick:qe(T=>q(m),["stop"])},{default:a(()=>[e($)]),_:2},1032,["onClick"])]),_:2},1024),e(k,{content:"Edit Folder","hide-after":0},{default:a(()=>[e(u,{onClick:qe(T=>b(m),["stop"])},{default:a(()=>[e(U)]),_:2},1032,["onClick"])]),_:2},1024)])])]),_:1},8,["data"])]),e(Yt,{ref_key:"folderDialogRef",ref:r,onOnConfirm:n},null,512)],64)}}}),Zt=pe(Qt,[["__scopeId","data-v-b47b284d"]]),Wt={class:"dialog-footer"},el={style:{display:"flex",gap:"20px","justify-content":"flex-start"}},tl={style:{display:"flex",width:"100%",gap:"8px"}},ll={key:0,style:{display:"flex",width:"250px"}},ol={style:{display:"flex","flex-direction":"column",width:"100%",gap:"8px"}},al={key:0},nl={key:1,style:{display:"flex",width:"100%"}},sl={class:"upload__button-box"},rl={class:"upload-filename"},il={style:{display:"flex","align-items":"center",cursor:"pointer"}},dl={key:2,style:{cursor:"not-allowed"}},ul={style:{display:"flex","flex-direction":"column",width:"100%",gap:"8px"}},cl={style:{width:"100%"}},pl={contenteditable:"true"},fl={style:{width:"100%"}},yl={class:"code-block"},gl=ce({__name:"EditDialog",emits:["refreshData"],setup(s,{expose:o,emit:t}){const d=ue(new fe),r=()=>new Date().getTime().toString(),n=M(!1),f=M(),l=M(d.apiItem),b=M(null),q=[{label:"Y",value:"Y"},{label:"N",value:"N"}],p=ut(()=>{let i=[];return l.value.httpMethod==="GET"||l.value.httpMethod==="DELETE"?i=[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"}]:l.value.headersContentType==="form-data"?i=[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"},{label:"Object Array",value:"object array"},{label:"Number Array",value:"number array"},{label:"String Array",value:"string array"},{label:"File",value:"file"}]:i=[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"},{label:"Object Array",value:"object array"},{label:"Number Array",value:"number array"},{label:"String Array",value:"string array"}],i}),v=[{label:"Number",value:"number"},{label:"String",value:"string"},{label:"Boolean",value:"boolean"},{label:"Object",value:"object"},{label:"Object Array",value:"object array"},{label:"Number Array",value:"number array"},{label:"String Array",value:"string array"}],x=M({interfaceName:{required:!0,message:"Interface Name을 입력하세요.",trigger:["change","blur"]},requestURL:{required:!0,message:"Request URL를 입력하세요.",trigger:["change","blur"]},httpMethod:{required:!0,message:"HTTP Method를 선택하세요.",trigger:["change","blur"]},clientType:{required:!0,message:"Client Type을 선택하세요",trigger:["change","blur"]},headersContentType:{required:!0,message:"Headers Content-Type을 선택하세요.",trigger:["change","blur"]}}),h=i=>{l.value.request.filter(_=>_.parameter===i.parameter&&i.level===_.level).length>1?(i.valid=!1,X.error("중복된 parameter: "+i.parameter)):i.valid=!0},g=i=>{l.value.response.filter(_=>_.variable===i.variable&&i.level===_.level).length>1?(i.valid=!1,X.error("중복된 variable: "+i.variable)):i.valid=!0},u=i=>{V(i)},k=()=>{l.value.request.push({paramId:r(),parentParamId:"",parameter:"",testValue:null,files:[],level:1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0})},L=i=>{if(i.row.level>=3){H.warning("최대 뎁스 레벨 초과 하였습니다.");return}let y=l.value.request.filter(O=>O.parentParamId===i.row.paramId),_=0;y.length>0&&y.forEach(O=>{_+=O.childrenCount}),l.value.request.forEach(O=>{O.paramId===i.row.paramId&&(O.childrenCount+=1)});let F=i.$index+y.length+_+1;l.value.request.splice(F,0,{paramId:r(),parentParamId:i.row.paramId,parameter:"",testValue:null,files:[],level:i.row.level+1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0})},w=i=>{if(i.row.childrenCount>0){H.error("자식 변수가 있습니다. 자식 변수를 먼저 삭제한 후 다시 시도하세요.");return}l.value.request.forEach(y=>{i.row.parentParamId===y.paramId&&(y.childrenCount-=1)}),l.value.request=l.value.request.filter((y,_)=>_!==i.$index)},$=()=>{l.value.response.push({variableId:r(),parentVariableId:"",variable:"",testValue:null,level:1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0})},U=i=>{if(i.row.level>=4){H.warning("최대 뎁스 레벨 초과 하였습니다.");return}let y=l.value.response.filter(O=>O.parentVariableId===i.row.variableId),_=0;y.length>0&&y.forEach(O=>{_+=O.childrenCount}),l.value.response.forEach(O=>{O.variableId===i.row.variableId&&(O.childrenCount+=1)});let F=i.$index+y.length+_+1;l.value.response.splice(F,0,{variableId:r(),parentVariableId:i.row.variableId,variable:"",testValue:null,level:i.row.level+1,requiredYn:"",type:"",description:"",childrenCount:0,valid:!0})},I=i=>{if(i.row.childrenCount>0){H.error("자식 변수가 있습니다. 자식 변수를 먼저 삭제한 후 다시 시도하세요.");return}l.value.response.forEach(y=>{i.row.parentVariableId===y.variableId&&(y.childrenCount-=1)}),l.value.response=l.value.response.filter((y,_)=>_!==i.$index)},V=i=>{i.valid=!0,i.requiredYn==="Y"&&!i.testValue?(X.error("Test Value를 입력하세요."),i.valid=!1):i.parameter?i.type?i.type==="boolean"&&i.testValue!=="true"&&i.testValue!=="false"?i.requiredYn==="N"&&!i.testValue?i.valid=!0:(i.valid=!1,X.error("Boolean(true/false)을 입력하세요.")):i.type==="number"&&Number.isNaN(Number(i.testValue))&&(X.error("숫자를 입력하세요."),i.valid=!1):(i.valid=!1,X.error(`"${i.parameter}"  Data Type을 선택하세요.`)):(i.valid=!1,X.error("Parameter를 입력하세요"))},m=i=>{let y={};return i.request.forEach(_=>{if(!_.type){X.error(`"${_.parameter}"  Data Type을 선택하세요.`);return}if(_.level===1){const F={[_.parameter]:T(_.testValue,_.type,_.paramId,_.parameter,_.files)};y=Object.assign({},y,F),console.log("requestParams",y)}}),y};function T(i,y,_,F,O){let j=null;if(y==="string"&&(j=i),y==="number"&&(j=Number(i)),y==="boolean"&&(j=!!i),y==="object"){const K={};l.value.request.forEach(B=>{B.parentParamId===_&&(K[B.parameter]=T(B.testValue,B.type,B.paramId,B.parameter))}),j=K}if(y==="object array"){const K={};l.value.request.forEach(B=>{B.parentParamId===_&&(K[B.parameter]=T(B.testValue,B.type,B.paramId,B.parameter))}),j=[K]}if(y==="number array"||y==="string array")try{j=JSON.parse(i.replace(/'/g,'"'))}catch{j="The value is wrong~~~!",X.error(`Parameter: ${F} 의 Test Value를 잘못 입력했습니다. 다시 입력해주세요.`)}if(y==="file"){const K=[];O&&O.length>0&&O.forEach(B=>{K.push(B.raw)}),j=K}return j}const R=i=>{let y=!0;return console.log("validate",i),i.request.forEach(_=>{_.type||(X.error(`"${_.parameter}"  Data Type을 선택하세요.`),y=!1,_.valid=!1),_.parameter||(X.error("Parameter를 입력하세요."),y=!1,_.valid=!1),_.requiredYn==="Y"&&_.type!=="object"&&_.type!=="object array"&&!_.testValue&&(X.error(`Parameter: ${_.parameter}의 Test Value를 입력해주세요.`),y=!1,_.valid=!1)}),y},E=async()=>{if(!R(l.value))return;l.value.requestExample=m(l.value);const i={httpMethod:l.value.httpMethod,headersContentType:l.value.headersContentType,donwloadFileName:l.value.donwloadFileName,requestURL:l.value.requestURL,requestParams:l.value.requestExample};await d.sendData(i).then(y=>{H.success("Request successed!"),l.value.responseExample=d.resultData,l.value.httpMethod!=="GETFILE"&&Y(l.value.response,d.resultData)}).catch(y=>{H.error("sendData ERROR---: ",y)})},Y=(i,y)=>{if(y){const _=[];for(const F in y){console.log(`${F}: ${typeof y[F]}`);const O={parentVariableName:"",variable:F,level:1,type:typeof y[F]};_.push(O),W(_,y[F])}N(_,i),console.log("resDataTypes",_)}else H.error("Theres is no response data.")};function N(i,y){const _=[];y.forEach(F=>{const O=i.find(j=>j.variable===F.variable);O?O.type!==F.type&&_.push(`<div style="white-space: normal;">- 응답한 데이터에 Data type이 일치하지 않은 변수: <strong>${F.variable}</strong></div>`):F.variable&&_.push(`<div style="white-space: normal;">- 응답한 데이터에 누락된 변수: <strong>${F.variable}</strong> </div>`)}),i.forEach(F=>{y.find(j=>j.variable===F.variable)||F.variable&&_.push(`<div style="white-space: normal;">- Response Variable에 요구하지 않은 변수: <strong>${F.variable}</strong></div>`)}),_.length>0&&yt.alert(`${_.join("")}`,"읍답 오류 데이터",{type:"warning",center:!0,dangerouslyUseHTMLString:!0})}function W(i,y){const _=i.length>0?i.length-1:null;if(_===null)return;const F=i[_];if(F.type.includes("object"))if(Array.isArray(y))if(typeof y[0]=="object")for(const O in y[0]){const j={parentVariableName:F.variable,variable:O,level:F.level+1,type:typeof y[0][O]};i.push(j),W(i,y[0][O]),i[_].type="object array"}else i[_].type=typeof y[0]+"array";else for(const O in y){const j={parentVariableName:F.variable,variable:O,level:F.level+1,type:typeof y[O]};i.push(j)}}const S=t,ye=()=>{l.value.testResult="",b.value.validate(i=>{var y,_;try{if(i){if((y=f.value)!=null&&y.innerText){const F=new Function(`return ${(_=f.value)==null?void 0:_.innerText}`);l.value.requestExample=F()}n.value?d.updateApi(l.value).then(F=>{H.success("수정 성공!","성공")}).catch(F=>{H.error("수정 실패!","실패")}):d.createApi(l.value).then(F=>{H.success("등록 성공!","성공")}).catch(F=>{H.error("등록 실패!","실패")})}}catch(F){H.error("저장한 데이터에 오타가 있는 것 같습니다. 확인 하시고 다시 저장해주세요. "+F)}})},ae=()=>{console.log("excelDownload data",l.value),Et(l.value,l.value.interfaceName,"api excel")},se=(i,y)=>{y.length>1&&y.shift(),console.log("onUpload",y)},we=i=>{i.files=[]},xe=M(""),ge=M(!1);let ne=null;const Re=(i,y)=>{d.getEnvironmentSetting(),ge.value=!0,xe.value="API "+i,y&&i==="수정"?(n.value=!0,ne=y.id,d.getApiInfo(ne).then(_=>{l.value=_})):n.value=!1},_e=()=>{var i;ge.value=!1,(i=b.value)==null||i.resetFields(),l.value.request=[],l.value.response=[],S("refreshData")};return o({openDialog:Re}),(i,y)=>{const _=be,F=ct,O=Le,j=he,K=Ce,B=Ae,Z=Ee,Be=pt,Ge=Ye,Je=de("delete"),Xe=Ue,Ne=ft,Oe=Ve,Ke=ke,Qe=Te;return P(),z(Qe,{"model-value":ge.value,title:xe.value,description:"",width:"90%",style:{height:"95%"},onOnClose:_e},{footer:a(()=>[C("span",Wt,[e(_,{onClick:_e,class:"POST"},{default:a(()=>y[7]||(y[7]=[A("닫기",-1)])),_:1,__:[7]}),e(_,{type:"primary",onClick:ye,class:"POST"},{default:a(()=>y[8]||(y[8]=[A("저장",-1)])),_:1,__:[8]})])]),default:a(()=>[e(Ke,{class:"editForm",ref_key:"ruleFormRef",ref:b,rules:x.value,model:l.value,"require-asterisk-position":"right","label-position":"left","label-width":"140"},{default:a(()=>[e(O,null,{default:a(()=>[e(F,{offset:45},{default:a(()=>[e(_,{onClick:E,type:"success",plain:""},{default:a(()=>y[9]||(y[9]=[A("Send",-1)])),_:1,__:[9]}),e(_,{onClick:ae},{default:a(()=>y[10]||(y[10]=[A("API Download",-1)])),_:1,__:[10]})]),_:1})]),_:1}),e(K,{label:"Interface Name",prop:"interfaceName"},{default:a(()=>[e(j,{type:"text",modelValue:l.value.interfaceName,"onUpdate:modelValue":y[0]||(y[0]=c=>l.value.interfaceName=c),placeholder:"Interface Name 입력"},null,8,["modelValue"])]),_:1}),e(K,{label:"Description",prop:"description"},{default:a(()=>[e(j,{type:"text",modelValue:l.value.description,"onUpdate:modelValue":y[1]||(y[1]=c=>l.value.description=c),placeholder:"Description 입력"},null,8,["modelValue"])]),_:1}),e(K,{label:"Request URL",prop:"requestURL"},{default:a(()=>[e(j,{type:"text",modelValue:l.value.requestURL,"onUpdate:modelValue":y[2]||(y[2]=c=>l.value.requestURL=c),placeholder:"Request URL 입력"},null,8,["modelValue"])]),_:1}),C("div",el,[e(K,{label:"HTTP Method",prop:"httpMethod"},{default:a(()=>[C("div",tl,[e(B,{width:"180px",modelValue:l.value.httpMethod,"onUpdate:modelValue":y[3]||(y[3]=c=>l.value.httpMethod=c),placeholder:"HTTP Method 선택",list:d.httpMethodList,"option-label":"label","option-value":"value"},null,8,["modelValue","list"]),l.value.httpMethod==="GETFILE"?(P(),te("div",ll,[e(j,{modelValue:l.value.donwloadFileName,"onUpdate:modelValue":y[4]||(y[4]=c=>l.value.donwloadFileName=c),placeholder:"Download File Name 입력"},null,8,["modelValue"])])):le("",!0)])]),_:1}),e(K,{label:"Client Type",prop:"clientType","label-width":"100",style:{"margin-left":"28px",width:"300px"}},{default:a(()=>[e(B,{modelValue:l.value.clientType,"onUpdate:modelValue":y[5]||(y[5]=c=>l.value.clientType=c),placeholder:"Client Type 선택",list:d.clientTypeList,"option-label":"label","option-value":"value"},null,8,["modelValue","list"])]),_:1}),e(K,{label:"Headers Content-Type",prop:"headersContentType","label-width":"180",style:{"margin-left":"28px",width:"400px"}},{default:a(()=>[e(B,{modelValue:l.value.headersContentType,"onUpdate:modelValue":y[6]||(y[6]=c=>l.value.headersContentType=c),placeholder:"Headers Content-Type 선택",list:d.headersContentTypeList,"option-label":"label","option-value":"value"},null,8,["modelValue","list"])]),_:1})]),e(K,{label:"Request"},{default:a(()=>[C("div",ol,[e(Oe,{data:l.value.request,style:{"min-height":"160px"},height:"100%"},{default:a(()=>[e(Z,{prop:"parameter",width:"160px"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==1?"valid-false":"")},[c.level==1?(P(),z(j,{key:0,modelValue:c.parameter,"onUpdate:modelValue":D=>c.parameter=D,placeholder:"Parameter 입력",onInput:D=>h(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"parameter",width:"160px",label:"Parameter"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==2?"valid-false":"")},[c.level==2?(P(),z(j,{key:0,modelValue:c.parameter,"onUpdate:modelValue":D=>c.parameter=D,placeholder:"Parameter 입력",onInput:D=>h(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"parameter",width:"160px"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==3?"valid-false":"")},[c.level==3?(P(),z(j,{key:0,modelValue:c.parameter,"onUpdate:modelValue":D=>c.parameter=D,placeholder:"Parameter 입력",onInput:D=>h(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"requiredYn",label:"Required",width:"90"},{default:a(({row:c})=>[e(B,{width:"100%",modelValue:c.requiredYn,"onUpdate:modelValue":D=>c.requiredYn=D,placeholder:"Y/N",list:q,"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Z,{prop:"type",label:"Type",width:"150"},{default:a(({row:c})=>[e(B,{width:"100%",modelValue:c.type,"onUpdate:modelValue":D=>c.type=D,placeholder:"Data Type",list:p.value,"option-label":"label","option-value":"value",onOnChange:D=>u(c)},null,8,["modelValue","onUpdate:modelValue","list","onOnChange"])]),_:1}),e(Z,{prop:"testValue",label:"Test Value"},{default:a(({row:c})=>{var D,je;return[c.type!=="object"&&c.type!=="object array"&&c.type!=="file"?(P(),te("div",al,[e(j,{modelValue:c.testValue,"onUpdate:modelValue":re=>c.testValue=re,placeholder:"Test Value 입력","input-style":{textAlign:"center"},onInput:re=>V(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])])):c.type=="file"?(P(),te("div",nl,[e(Be,{ref:"uploadRef","file-list":c.files,"onUpdate:fileList":re=>c.files=re,"auto-upload":!1,"show-file-list":!1,onChange:se},{default:a(()=>[C("div",sl,[e(_,{size:"small",type:"warning",plain:""},{default:a(()=>y[11]||(y[11]=[A("File",-1)])),_:1,__:[11]})])]),_:2},1032,["file-list","onUpdate:fileList"]),e(Ge,{disabled:!((D=c.files[0])!=null&&D.name),content:(je=c.files[0])==null?void 0:je.name,placement:"bottom",effect:"light"},{default:a(()=>{var re;return[C("div",rl,Q((re=c.files[0])==null?void 0:re.name),1)]}),_:2},1032,["disabled","content"]),C("div",il,[e(Xe,{onClick:re=>we(c)},{default:a(()=>[e(Je)]),_:2},1032,["onClick"])])])):(P(),te("div",dl,"-"))]}),_:1}),e(Z,{prop:"description",label:"Description"},{default:a(({row:c})=>[e(j,{type:"textarea",autosize:"",modelValue:c.description,"onUpdate:modelValue":D=>c.description=D,placeholder:"Description 입력"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Z,{width:"100"},{default:a(c=>[e(Ne,null,{default:a(()=>[e(_,{text:"",icon:"delete",type:"danger",onClick:D=>w(c)},null,8,["onClick"]),Ie(e(_,{text:"",icon:"plus",type:"info",onClick:D=>L(c)},null,8,["onClick"]),[[$e,(c.row.type==="object array"||c.row.type==="object")&&c.row.level<3]])]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(_,{class:"add-btn",onClick:k,type:"success",plain:""},{default:a(()=>y[12]||(y[12]=[A("Add",-1)])),_:1,__:[12]})])]),_:1}),e(K,{label:"Response"},{default:a(()=>[C("div",ul,[e(Oe,{data:l.value.response,style:{"min-height":"160px"},height:"100%"},{default:a(()=>[e(Z,{prop:"variable",width:"160px"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==1?"valid-false":"")},[c.level==1?(P(),z(j,{key:0,modelValue:c.variable,"onUpdate:modelValue":D=>c.variable=D,placeholder:"Variable 입력",onInput:D=>g(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"variable",width:"160px",label:"Variable"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==2?"valid-false":"")},[c.level==2?(P(),z(j,{key:0,modelValue:c.variable,"onUpdate:modelValue":D=>c.variable=D,placeholder:"Variable 입력",onInput:D=>g(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"variable",width:"160px"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==3?"valid-false":"")},[c.level==3?(P(),z(j,{key:0,modelValue:c.variable,"onUpdate:modelValue":D=>c.variable=D,placeholder:"Variable 입력",onInput:D=>g(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"variable"},{default:a(({row:c})=>[C("div",{class:ie(!c.valid&&c.level==4?"valid-false":"")},[c.level==4?(P(),z(j,{key:0,modelValue:c.variable,"onUpdate:modelValue":D=>c.variable=D,placeholder:"Variable 입력",onInput:D=>g(c)},null,8,["modelValue","onUpdate:modelValue","onInput"])):le("",!0)],2)]),_:1}),e(Z,{prop:"requiredYn",label:"Required",width:"90"},{default:a(({row:c})=>[e(B,{width:"100%",modelValue:c.requiredYn,"onUpdate:modelValue":D=>c.requiredYn=D,placeholder:"Y/N",list:q,"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Z,{prop:"type",label:"Type",width:"150"},{default:a(({row:c})=>[e(B,{width:"100%",modelValue:c.type,"onUpdate:modelValue":D=>c.type=D,placeholder:"Data Type",list:v,"option-label":"label","option-value":"value"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Z,{prop:"description",label:"Description"},{default:a(({row:c})=>[e(j,{type:"textarea",autosize:"",modelValue:c.description,"onUpdate:modelValue":D=>c.description=D,placeholder:"Description 입력"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(Z,{width:"100"},{default:a(c=>[e(Ne,null,{default:a(()=>[e(_,{text:"",icon:"delete",type:"danger",onClick:D=>I(c)},null,8,["onClick"]),Ie(e(_,{text:"",icon:"plus",type:"info",onClick:D=>U(c)},null,8,["onClick"]),[[$e,(c.row.type==="object array"||c.row.type==="object")&&c.row.level<4]])]),_:2},1024)]),_:1})]),_:1},8,["data"]),e(_,{class:"add-btn",onClick:$,type:"success",plain:""},{default:a(()=>y[13]||(y[13]=[A("Add",-1)])),_:1,__:[13]})])]),_:1}),e(K,{label:"Request Example",prop:"requestExample"},{default:a(()=>[C("pre",cl,[C("code",pl,[C("div",{class:"code-block",ref_key:"requestCode",ref:f},Q(l.value.requestExample),513)])])]),_:1}),e(K,{label:"Response Example",prop:"responseExample"},{default:a(()=>[C("pre",fl,[y[14]||(y[14]=A("                ",-1)),C("code",null,[C("div",yl,Q(l.value.responseExample),1)]),y[15]||(y[15]=A(`
            `,-1))])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["model-value","title"])}}}),vl=pe(gl,[["__scopeId","data-v-696aee19"]]),ml={class:"content-body"},hl={style:{width:"17%",padding:"12px 8px"}},bl={style:{width:"50%"}},xl={class:"info-btn"},_l={key:1},Sl={style:{flex:"1",padding:"0 16px 16px 16px"}},ql={style:{width:"100%"}},Vl={contenteditable:"true"},El={style:{width:"100%","white-space":"pre-wrap","min-height":"160px","max-height":"590px",overflow:"scroll"}},Tl={contenteditable:"false"},kl=ce({__name:"index",setup(s){const o=ue(new fe),t=ue({requestURL:"",httpMethod:"",interfaceName:"",clientType:""}),d=M(null),r=M({interfaceName:"",requestURL:"",httpMethod:"",description:"",requestExample:"",responseExample:""});gt(async()=>{n(),await o.getEnvironmentSetting(),De().setEnvironmentSetting(o.environmentSetting)});const n=()=>{o.getApiList(t)},f=R=>{o.getApiList({requestURL:R})},l=()=>{u.value.forEach(async R=>{const E={httpMethod:R.httpMethod,headersContentType:R.headersContentType,requestURL:R.requestURL,requestParams:JSON.parse(R.requestExample)};await o.sendData(E).then(Y=>{R.testResult=Y.result===200?"성공":"실패",console.log("testApi result:",Y),R.responseExample=Y.data}).catch(Y=>{R.testResult="실패",console.log("testApi error:",Y),X.error(`ERROR:${Y.result}, Message: ${Y.message} `)})})},b=M(!1),q=M(null),p=()=>{var R;try{if(r.value.requestURL){b.value=!0;const E=new Function(`return ${(R=q.value)==null?void 0:R.innerText}`),Y={httpMethod:r.value.httpMethod,headersContentType:r.value.headersContentType,requestURL:r.value.requestURL,requestParams:E()};r.value.responseExample=null,o.sendData(Y).then(N=>{console.log("runApi result:",N),r.value.responseExample=N.data,r.value.testResult=N.result===200?"성공":"실패",H.success("Request success!")}).catch(N=>{r.value.responseExample=N,H.error("runApi ERROR: "+N)}),setTimeout(()=>{b.value=!1},200)}}catch(E){H.error("Code ERROR",E),b.value=!1}},v=M(null),x=()=>{var R;(R=v.value)==null||R.openDialog("등록")},h=R=>{var E;R.id&&((E=v.value)==null||E.openDialog("수정",R))},g=R=>{r.value={...R},r.value.requestExample=JSON.parse(R.requestExample),r.value.responseExample=JSON.parse(R.responseExample)},u=M([]),k=R=>{u.value=He.getTableSelection(d,R)},L=()=>{u.value.forEach(R=>{o.deleteApi(R.id)}),u.value=[],o.apiList=[],n()},w=async()=>{await o.getCoverPage(),await o.getHistoryList(),Tt(o.coverPageInfo,o.historyList,u.value,"api excel")},$=M(null),U=()=>{$.value.openDialog()},I=M(null),V=()=>{I.value.openDialog()},m=M(null),T=()=>{m.value.openDialog()};return(R,E)=>{const Y=mt,N=Ae,W=vt,S=be,ye=Le,ae=Ee,se=bt,we=Ve,xe=de("CaretRight"),ge=Ue,ne=_t,Re=xt,_e=St;return P(),te(Pe,null,[e(ve(qt),null,{default:a(()=>[e(W,{"on-search":n},{default:a(()=>[e(Y,{width:"280px",label:"Request URL",placeholder:"Request URL 입력",modelValue:t.requestURL,"onUpdate:modelValue":E[0]||(E[0]=i=>t.requestURL=i)},null,8,["modelValue"]),e(Y,{width:"300px",label:"Interface Name",placeholder:"Interface Name 입력",modelValue:t.interfaceName,"onUpdate:modelValue":E[1]||(E[1]=i=>t.interfaceName=i)},null,8,["modelValue"]),e(N,{label:"HTTP Method",width:"280px",modelValue:t.httpMethod,"onUpdate:modelValue":E[2]||(E[2]=i=>t.httpMethod=i),placeholder:"HTTP Method 선택",list:o.httpMethodList,"option-label":"label","option-value":"value"},null,8,["modelValue","list"]),e(N,{label:"Client Type",width:"250px",modelValue:t.clientType,"onUpdate:modelValue":E[3]||(E[3]=i=>t.clientType=i),placeholder:"Client Type 선택",list:o.clientTypeList,"option-label":"label","option-value":"value"},null,8,["modelValue","list"])]),_:1}),C("div",ml,[C("section",hl,[e(Zt,{onOnClikNode:f})]),C("section",bl,[e(ye,{title:"API 목록","bottom-line":""},{left:a(()=>[C("div",xl,[e(S,{icon:"Files",text:"",onClick:V},{default:a(()=>E[5]||(E[5]=[A("표지",-1)])),_:1,__:[5]}),e(S,{icon:"Files",text:"",onClick:U},{default:a(()=>E[6]||(E[6]=[A("개정이력",-1)])),_:1,__:[6]}),e(S,{icon:ve(ht),text:"",onClick:T},{default:a(()=>E[7]||(E[7]=[A("Host설정",-1)])),_:1,__:[7]},8,["icon"])])]),default:a(()=>[e(S,{type:"success",plain:"",onClick:l},{default:a(()=>E[8]||(E[8]=[A("TEST",-1)])),_:1,__:[8]}),e(S,{type:"info",plain:"",onClick:x},{default:a(()=>E[9]||(E[9]=[A("등록",-1)])),_:1,__:[9]}),e(S,{type:"info",plain:"",onClick:L},{default:a(()=>E[10]||(E[10]=[A("삭제",-1)])),_:1,__:[10]}),e(S,{type:"info",plain:"",onClick:w},{default:a(()=>E[11]||(E[11]=[A("API Download",-1)])),_:1,__:[11]})]),_:1}),e(we,{ref_key:"tableRef",ref:d,multiple:"",data:o.apiList,onRowClick:g,onRowDblclick:h,onSelectionChange:k,"cell-style":{cursor:"pointer"},"header-cell-style":{height:"40px"},height:"100%"},{default:a(()=>[e(ae,{type:"selection",width:"40"}),e(ae,{label:"NO",type:"index",width:"60"}),e(ae,{label:"Interface Name",prop:"interfaceName",width:"160","show-overflow-tooltip":""}),e(ae,{label:"Request URL",prop:"requestURL","show-overflow-tooltip":""}),e(ae,{label:"Method",prop:"httpMethod",width:"80"},{default:a(({row:i})=>[i.httpMethod==="GET"?(P(),z(se,{key:0,type:"success","disable-transitions":"",round:""},{default:a(()=>E[12]||(E[12]=[A("GET",-1)])),_:1,__:[12]})):le("",!0),i.httpMethod==="POST"?(P(),z(se,{key:1,type:"primary","disable-transitions":"",round:""},{default:a(()=>E[13]||(E[13]=[A("POS",-1)])),_:1,__:[13]})):le("",!0),i.httpMethod==="PUT"?(P(),z(se,{key:2,type:"warning","disable-transitions":"",round:""},{default:a(()=>E[14]||(E[14]=[A("PUT",-1)])),_:1,__:[14]})):le("",!0),i.httpMethod==="DELETE"?(P(),z(se,{key:3,type:"danger","disable-transitions":"",round:""},{default:a(()=>E[15]||(E[15]=[A("DEL",-1)])),_:1,__:[15]})):le("",!0)]),_:1}),e(ae,{label:"Client Type",prop:"clientType",width:"120"}),e(ae,{label:"Test",prop:"testResult",sortable:"",width:"90"},{default:a(({row:i})=>[i.testResult==="성공"?(P(),z(se,{key:0,type:"success",round:"","disable-transitions":""},{default:a(()=>[A(Q(i.testResult),1)]),_:2},1024)):i.testResult===""?(P(),te("span",_l,"-")):(P(),z(se,{key:2,type:"danger",round:"","disable-transitions":""},{default:a(()=>[A(Q(i.testResult),1)]),_:2},1024))]),_:1})]),_:1},8,["data"])]),C("section",Sl,[e(ye,{title:"API 상세","bottom-line":""},{default:a(()=>[e(S,{type:"success",plain:"",onClick:p,disabled:!r.value.requestURL},{default:a(()=>[e(ge,null,{default:a(()=>[e(xe)]),_:1})]),_:1},8,["disabled"]),e(S,{onClick:E[4]||(E[4]=i=>h(r.value)),type:"info",plain:"",disabled:!r.value.requestURL},{default:a(()=>E[16]||(E[16]=[A("수정",-1)])),_:1,__:[16]},8,["disabled"])]),_:1}),Ie((P(),z(Re,{size:"large",column:1,border:""},{default:a(()=>[e(ne,{label:"Interface Name","label-align":"center"},{default:a(()=>[A(Q(r.value.interfaceName),1)]),_:1}),e(ne,{label:"Description","label-align":"center"},{default:a(()=>[A(Q(r.value.description),1)]),_:1}),e(ne,{label:"Request URL","label-align":"center"},{default:a(()=>[A(Q(r.value.requestURL),1)]),_:1}),e(ne,{label:"Http Method","label-align":"center"},{default:a(()=>[A(Q(r.value.httpMethod),1)]),_:1}),e(ne,{label:"Request Example","label-align":"center"},{default:a(()=>[C("pre",ql,[C("code",Vl,[C("div",{class:"code-block",ref_key:"requestCodeRef",ref:q},Q(r.value.requestExample),513)])])]),_:1}),e(ne,{label:"Response Example","label-align":"center"},{default:a(()=>[C("pre",El,[C("code",Tl,Q(r.value.responseExample),1)])]),_:1})]),_:1})),[[_e,b.value]])])])]),_:1}),e(Ut,{ref_key:"revisionHistoryDialogRef",ref:$},null,512),e(Ft,{ref_key:"coverPageDialogRef",ref:I},null,512),e($t,{ref_key:"environmentSettingDialogRef",ref:m},null,512),e(vl,{ref_key:"editDialogRef",ref:v,onRefreshData:n},null,512)],64)}}}),Rl=pe(kl,[["__scopeId","data-v-679cda46"]]);export{Rl as default};
